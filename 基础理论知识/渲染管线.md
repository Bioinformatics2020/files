# 渲染管线基础

### 应用阶段

- 可视性剔除
- 灯光、模型、摄像机准备

- 纹理、材质、着色器准备
- 数据放入显存
- Draw Call合批与发送

### 几何阶段

#### 传统管线

- 输入装配阶段Input Assembler(IA)。读取索引数据和顶点数据。

- 顶点着色器。顶点位置偏移、着色等
- 曲面细分着色器Tessellation Shader (TESS)。
  - 细分控制着色器Hull Shader。主要作用是用来定义一些细分的参数，比如每条边上如何细分和内部三角形如何细分
  - 曲面细分tessellator。使用固定算法进行细分
  - 细分计算着色器Domain Shader。重新计算顶点信息
- 几何着色器。针对图元进行操作，顶点增删改等。
- MVP矩阵视口变换。局部坐标->世界坐标->观察坐标->裁剪坐标->屏幕坐标。
- 裁剪。裁剪掉摄像机不可见的顶点
- 流输出Stream Output。可以将顶点信息输出到内存用于下次使用

#### 网格渲染管线

- Amplification Shader
- Mesh Shader

### 光栅化阶段

#### 前向渲染

- 图元组装。收集顶点信息，组装成线、面。
- 三角形遍历。生成可视片元、深度插值与排序。
- 片元着色器。纹理采样、光照计算等。
- 逐片元操作。对片元信息合并输出，包括裁剪测试、透明的测试、模板测试、深度测试
- 后期处理

#### 延时渲染

- 图元组装。收集顶点信息，组装成线、面。
- 三角形遍历。生成片元、深度插值与排序。
- G-buffer填充。缓存可视像素的法线、颜色(材质、纹理)、深度等信息。
- 光照计算。
- 后期处理。

### 输出阶段

- 帧缓存。输出到屏幕缓冲区 

# GPU模块划分

图形流水线

通用计算 

光线追踪

张量核Tensor Core

视频编解码